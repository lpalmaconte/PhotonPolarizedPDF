---
title: "Introducci√≥n a la Ciencia de Datos"
subtitle: Gu√≠a de trabajos pr√°cticos N¬∞1
output:
  html_document: default
  pdf_document: default
fontsize: 12pt
urlcolor: blue
---

```{css style settings, echo = FALSE}
blockquote {
    padding: 10px 20px;
    margin: 0 0 20px;
    font-size: 14px;
    border-left: 5px solid #eee;
}
body {
    font-size: 16px;
}
```

```{r setup, include=FALSE}
knitr::opts_chunk$set(include=FALSE)
```

Les proponemos comenzar a analizar un set de datos (conjunto de datos)  a partir de una serie de consignas. Para esto vamos a utilizar el lenguaje de programaci√≥n R, utilizando **RStudio** como entorno de desarrollo integrado (IDE). Si es que no saben de qu√© se trata, este √∫ltimo t√©rmino lo ver√°n en detalle en la materia **Programaci√≥n I**. Por ahora qued√©monos con la idea de que **RStudio** es el *programa* que vamos a usar para usar R. 

### Conociendo R y RStudio

1. Abran **RStudio** en la computadora que est√©n trabajando. Deber√≠an encontrarse con una pantalla como la siguiente:![](RSTUDIO_IMAGEN.png){width=70%}

donde pueden ver 4 ventanas, adem√°s de la barra de opciones en la parte superior:

**[1]** es el editor de sintaxis: se trata del lugar donde escribimos el c√≥digo para posteriormente ejecutarlo. Al escribir all√≠ no suceder√° nada, a no ser que se apriete alg√∫n bot√≥n para ejecutar los comandos o la tecla ctrl+enter. Si cuando abren RStudio esta ventana no les aparece, es porque tienen que crear un nuevo *script* con el bot√≥n de arriba a la izquierda en la barra de herramientas (el que tiene una hoja con un +), abrir uno con el t√≠pico bot√≥n de abrir, o usar el atajo Ctrl+Shift+N.

**[2]** es el ‚Äúentorno de trabajo‚Äù del programa: en este lugar se muestra el conjunto de datos y los ‚Äúobjetos‚Äù (resultados, variables, etc.) que se almacenan al ejecutar diferentes an√°lisis. Cuando aparezcan cosas ah√≠, pueden cliquearlas para explorarlas.

**[3]** es la consola. All√≠ el software ejecuta las operaciones realizadas desde el editor de sintaxis. Tambi√©n se puede escribir y ejecutar c√≥digo desde all√≠ directamente.  *(OJO: no se guarda lo aqu√≠ ejecutado en el* script *que exporten)*. 

**[4]** esta zona tiene varias subpesta√±as: (i) la pesta√±a *files* es un explorador de  archivos como el del sistema; (ii) la pesta√±a *plots* permite visualizar los gr√°ficos que se generen y visualizar los previos; (iii) la pesta√±a packages permite ver los paquetes descargados y guardados en el disco duro as√≠ como gestionar su instalaci√≥n o actualizaci√≥n; (iv) la pesta√±a *help* permite acceder a la p√°gina oficial del software con recursos para el programa: manuales para el usuario, cursos *on line*, informaci√≥n general, descarga de paquetes, informaci√≥n de los paquetes instalados, etc.

La idea es que en esta clase vayan familiariz√°ndose con el uso del lenguaje de an√°lisis de datos R utilizando **RStudio** como interfaz. 

### An√°lisis del dataset iris

2. En RStudio abran el *script* **iris.R** que pueden descargar desde el Campus de la Materia. En ese *script* van a encontrar el c√≥digo que vamos a usar en la clase de hoy. Vamos a ir repasando qu√© es lo que hace cada l√≠nea del c√≥digo y ustedes van a tener que responder preguntas a partir de lo que vayan obteniendo. 
   Para no correr todo el c√≥digo de una vez, la idea es que **copien cada comando que vayan necesitando desde el editor de sintaxis y lo peguen en la consola para ejecutarlo.** Tambi√©n pueden seleccionar el texto y ejecutarlo en la consola directamente con el atajo **Ctrl+Enter**.

Esta din√°mica va a permitir que ustedes vayan entendiendo qu√© hace cada comando y que puedan utilizarlo en el futuro (por ejemplo, para la Entrega 1 üòâ).

3. En primer lugar, ejecutar (de ahora en m√°s, cada vez que digamos ‚Äúejecutar‚Äù nos referiremos a copiar, pegar y correr -apretar enter- en la ventana de la consola o usar el atajo Ctrl+Enter en la venta del editor) las l√≠neas

```{r message=FALSE, include=TRUE}
library(tidyverse)
```

para cargar la librer√≠a que les van a permitir, entre otras cosas, hacer gr√°ficos con el comando ggplot. En general, los comandos para cargar librer√≠as se ubican arriba de todo en los *scripts*. 

4. En la clase de hoy vamos a trabajar con un dataset [muy famoso](https://es.wikipedia.org/wiki/Conjunto_de_datos_flor_iris) llamado iris. Dado que este conjunto de datos est√° incorporado en R, se lo puede cargar en el *data frame* ‚Äúdata‚Äù utilizando el siguiente comando

```{r message=FALSE, include=TRUE}
data <- iris
```

Los *data frames* son estructuras de datos de dos dimensiones que pueden contener datos de diferentes tipos. Es la estructura de datos m√°s usada para realizar an√°lisis de datos. Ejecutando el comando 
```{r message=FALSE, include=TRUE, results='hide'}
view(data)
```
se puede activar un visor de datos tipo hoja de c√°lculo (como tabla de datos). All√≠ van a poder ver los datos ordenados en filas y columnas, donde cada una de estas √∫ltimas tendr√° su *header* (encabezado), indicando el nombre de la variable que representa. Otra forma de acceder a esta presentaci√≥n del conjunto de datos es haciendo clic en el nombre de la variable en el "entorno de trabajo".

Este comando nos va a servir para poder explorar el *dataset* y entender de qu√© va. Sin embargo, es probable que esto no sea suficiente.

5. Ejecuten el comando
```{r message=FALSE, include=TRUE}
help(iris)
```
para obtener informaci√≥n sobre el dataset. Esta aparecer√° en la ventana **[4]** de RStudio. Utilicen esta informaci√≥n, junto con la que encuentren con la herramienta m√°s importante que tienen y tendr√°n por el resto de su vida: **Google**. Jam√°s subestimen una buena b√∫squeda en google. Busquen la informaci√≥n necesaria para entender qu√© representa cada columna del dataset (<https://letmegooglethat.com/?q=Sepalo>). Esta es una tarea que tendr√°n que realizar cada vez que se enfrenten a un nuevo dataset.

6. Respondan mirando el dataset:
   a. ¬øCu√°ntas filas hay? 
   a. ¬øCu√°ntas columnas hay? 
   a. ¬øQu√© representa cada fila? Es decir, ¬øcu√°les son las **unidades** de este dataset? Recuerden que para contestar esta pregunta correctamente es necesario ser lo m√°s espec√≠ficx posible.
   a. ¬øQu√© variables son categ√≥ricas? 
   a. ¬øQu√© variables son num√©ricas? 
   a. Estas √∫ltimas, ¬øson enteros o puntos flotantes?

7. ¬øCu√°ntas y cu√°les son las especies de flores presentes en el dataset? Para responder esta pregunta pueden aplicar el comando unique a la columna Species. Este comando devuelve una lista con los **elementos √∫nicos** del vector en cuesti√≥n. Para elegir una variable de un dado *data frame* hay varias opciones, algunas son:

```{r message=FALSE, include=TRUE,results='hide'}
data$Species
data["Species"]
```

### Gr√°fico de dispersi√≥n o Scatter plot

Los gr√°ficos de dispersi√≥n se utilizan para identificar y mostrar relaciones entre dos variables num√©ricas. Utiliza puntos para representar los valores de dos variables num√©ricas de un conjunto de datos. La posici√≥n de cada punto en los ejes horizontal y vertical indica los valores de un punto de datos individual. Las relaciones entre las variables pueden describirse de muchas maneras: positivas o negativas, fuertes o d√©biles, lineales o no lineales.

8. En el pr√≥ximo punto vamos a pedirles que realicen un gr√°fico de dispersi√≥n (*scatter plot*) del  Ancho del S√©palo (Sepal.Width) vs. el Largo del S√©palo (Sepal.Length). Pero antes, piensen qu√© tipo de relaci√≥n esperan encontrar entre estas variables y hagan un gr√°fico a mano alzada en un papel.
9. Ahora s√≠, con el comando

```{r message=FALSE, include=TRUE, results='hide',fig.show='hide'}
ggplot(data, aes(x=Sepal.Length, y=Sepal.Width)) + 
geom_point() + 
xlab("Largo del S√©palo [cm]") + 
ylab("Ancho del S√©palo [cm]")
```

realicen el gr√°fico y comp√°renlo con sus expectativas. ¬øSe parece a lo que esperaban? Si la respuesta es no, ¬øen qu√© difiere? ¬øpor qu√© puede ser?

Respecto al c√≥digo que usamos en este caso, lo primero que tuvimos que indicarle al comando ggplot es el *data frame* (data) y con al comando aes le indicamos qu√© columna queremos usar como la variable x y cu√°l otra como la variable y. Con el comando geom\_point() indicamos el tipo de gr√°fico que queremos realizar (gr√°fico ‚Äúde puntos‚Äù) y por √∫ltimo  xlab e ylab nos permiten ponerle nombre a los ejes. Noten que en este caso no s√≥lo estamos d√°ndole un nombre al eje sino que estamos indicando en qu√© unidades se est√° midiendo la magnitud en cuesti√≥n. 

10. ¬øCu√°ntas variables necesitaron para hacer este gr√°fico? 
11. ¬øQu√© representa cada uno de los puntos del gr√°fico? 
12. ¬øQu√© informaci√≥n brinda este gr√°fico? ¬øSe observa alguna relaci√≥n clara entre ambas variables? 

Una modificaci√≥n com√∫n del gr√°fico de dispersi√≥n es la adici√≥n de una **tercera variable**. Los valores de la tercera variable pueden codificarse, por ejemplo, modificando la forma de los puntos. En el caso de una tercera variable que indique valores **categ√≥ricos** la codificaci√≥n m√°s com√∫n es mediante el color de los puntos. Dar a cada punto un tono distinto permite mostrar la pertenencia a cada uno de los grupos.

13. Agreguemos al gr√°fico anterior la informaci√≥n de una **variable** **categ√≥rica**. La √∫nica variable categ√≥rica en este *dataset* es la especie. Para ello ejecutar el c√≥digo

```{r message=FALSE, include=TRUE, results='hide',fig.show='hide'}
ggplot(data, aes(x=Sepal.Length, y=Sepal.Width, color=Species)) + 
geom_point() + 
xlab("Largo del S√©palo [cm]") + 
ylab("Ancho del S√©palo [cm]")
```

que como ven es igual al anterior, excepto porque le agregamos el argumento color al comando aes, indicando qu√© columna queremos que tenga en cuenta para colorear los puntos. 

14. Discutan en grupo si alguna de las conclusiones del punto 13 cambiaron, o si surge alguna nueva. 

15. Repitan los puntos del 8 al 14 pero ahora utilizando las variables Ancho del P√©talo (Petal.Width) vs. el Largo del P√©talo (x=Petal.Length). Para realizar los gr√°ficos de dispersi√≥n correspondientes, van a tener que modificar el c√≥digo del punto 9. All√≠, deber√°n cambiar cu√°les son las columnas que quieren usar ahora como variable x y como variable y.

### An√°lisis del dataset lifestyle

Se analizaron 44 ciudades de todo el mundo para descubrir d√≥nde es m√°s f√°cil llevar un estilo de vida sano. Desde los niveles de obesidad hasta los √≠ndices de contaminaci√≥n, cada ciudad ha recibido una puntuaci√≥n en 10 par√°metros de vida saludable. Fuente y detalles  del dataset: [https://www.lenstore.co.uk/](https://www.lenstore.co.uk/research/healthy-lifestyle-report/)

En el campus pueden encontrar el archivo **citiesdf.RData**, que es el *dataset* ya en formato data frame listo para ser abierto por RStudio. Esto pueden hacerlo apretando el √≠cono de Abrir en el entorno de trabajo. Les proponemos resolver los siguientes puntos utilizando el c√≥digo que aprendimos en la secci√≥n anterior. 

16. Mirando el dataset responder:
     a. ¬øCu√°ntas observaciones tiene este *dataset*? 
     a. ¬øCu√°ntas variables? 
     a. ¬øQu√© representa cada fila? Es decir, ¬øcu√°les son las **unidades** de este dataset? Recuerden que para contestar esta pregunta correctamente es necesario ser lo m√°s espec√≠ficx posible.
     a. ¬øQu√© variables son categ√≥ricas? 
     a. ¬øQu√© variables son num√©ricas? 
17. A partir de los distintos tipos de datos que contiene cada una de las columnas.
     a. Para las variables categ√≥ricas: explicar qu√© representa la variable y cu√°les son las posibles categor√≠as dentro de la misma.
     a. Para las variables num√©ricas: ¬øson continuas o discretas? ¬øQu√© variables tienen formato *float*?
18. ¬øQu√© variables se podr√≠an usar para hacer un scatter plot? Elijan dos variables cuyo gr√°fico podr√≠a brindarles informaci√≥n interesante. ¬øC√≥mo se imaginan que va a resultar este gr√°fico?
19. Realizar el gr√°fico que pensaron en el anterior ¬øQu√© resultados obtuvieron? ¬øResult√≥ como se hab√≠an imaginado? ¬øPor qu√©?
    a. ¬øC√≥mo mejorar√≠an el gr√°fico?
    a. ¬øEs necesario ajustar los l√≠mites de los ejes? 
    a. ¬øHay alg√∫n punto que sobresalga o que les llame la atenci√≥n?
20. Repetir el punto 18 y 19 para otro par de variables.
21. De todos los gr√°ficos que fueron haciendo ¬øCu√°l transmite m√°s informaci√≥n? ¬øIdentifican alg√∫n comportamiento llamativo? ¬øCu√°l es m√°s claro?.
22. Elegir uno de los *scatter plots* realizados en el punto anterior al que le agregaremos una ‚Äútercera dimensi√≥n‚Äù coloreando los puntos. Elegir una variable de tal manera que se pueda aprovechar la nueva informaci√≥n que est√°n sumando al gr√°fico. Pensar cu√°l y explicar por qu√© eligieron esa. 


# Para trabajar en casa

Contest√° el [Cuestionario de la Clase 1](https://docs.google.com/forms/d/e/1FAIpQLSfwFmuimcOyfgML94H71z5Hlst0skd1SUj8iEbm8uVCwmhEiw/viewform?usp=sf_link) antes de la clase virtual de esta semana.

**Instalaci√≥n de R y RStudio**

Pueden seguir los pasos del siguiente link para instalar tanto R como RStudio en sus computadoras.

<https://bookdown.org/jboscomendoza/r-principiantes4/instalacion.html>

Si usan Ubuntu [este](https://drive.google.com/file/d/1YmISjlslkLPohDR77MK7HERtv60VwOKq/view?usp=share_link) script para Ubuntu 22 y [este](https://drive.google.com/file/d/1ap4Afwp7KAhZTzuPRm5AZRka_TV5TcmW/view?usp=share_link) para Ubuntu 18 ya lo instala con los paquetes necesarios.

Si tienen problemas de instalaci√≥n, pueden utilizar ‚ÄúColab‚Äù, una herramienta disponible con su drive. Para ello, usen [este](https://colab.research.google.com/notebook#create=true&language=r) enlace y les abrir√° un entorno de ejecuci√≥n de R en la nube ‚òÅ.

## Para tener en cuenta antes de ponerse a trabajar

Los paquetes que vamos usando en R hay que instalarlos. Por ejemplo, para lo que hicimos en esta gu√≠a necesitamos usar el paquete tidyverse que ya hab√≠amos instalado en las compus que usaron en los Laboratorios. Si ese no fuera el caso, antes de eso es necesario instalarlo corriendo en la consola el comando:

```{r message=FALSE, include=TRUE, results='hide'}
install.packages("tidyverse")
```

## Bibliograf√≠a obligatoria

**Tipos de datos**

<https://bookdown.org/jboscomendoza/r-principiantes4/tipos-de-datos.html>

**C√≥mo trabajar con scatter plots en R**

<https://cienciadedatos.github.io/r4ds/03-visualize.html#creando-un-gr%C3%A1fico-con-ggplot>

<https://r-graph-gallery.com/scatterplot.html>

## Bibliograf√≠a para profundizar

**Sobre scatter plots (en ingl√©s):**

Overplotting: **<https://www.data-to-viz.com/caveat/overplotting.html>**

Detractores del Bubble chart: **<https://www.data-to-viz.com/caveat/area_hard.html>**

A Complete Guide to Scatter Plots: <https://chartio.com/learn/charts/what-is-a-scatter-plot/#what-is-a-scatter-plot>

